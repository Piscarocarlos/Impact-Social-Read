import{r as a,s as G,a as n,j as e,L as W,F as X,d as S}from"./main-7817f3b1.js";import{D as Z,a as q}from"./DefaultLayout-c44391f7.js";import{N as K}from"./index-a42b5db0.js";import{s as _}from"./sortBy-2ed23318.js";import{d as Q,f as I}from"./index.esm-fffe3f01.js";import{u as U}from"./useDispatch-d01b19de.js";import{t as h,S as p}from"./transition-35f1fbff.js";import"./App-6286d217.js";import"./useSelector-73b17a09.js";import"./slicedToArray-faa72b39.js";import"./index-4d501b15.js";import"./index-d410f391.js";import"./floating-ui.dom.browser.min-71618afd.js";import"./keyboard-bc2fdc5c.js";function fe({convention:l}){const P=U();a.useEffect(()=>{P(G("Column Chooser Table"))});const[f,b]=a.useState(1),g=[10,20,30,50,100],[i,D]=a.useState(g[0]),[c,x]=a.useState(_(l,"id")),[F,L]=a.useState(c),[d,j]=a.useState(""),[u,E]=a.useState({columnAccessor:"id",direction:"asc"}),[s,v]=a.useState(["created_at"]),M=(t,r)=>{s.includes(t)?v(o=>s.filter(J=>J!==o)):v([...s,t])},R=[{accessor:"id",title:"Id"},{accessor:"familleConvention",title:"Famille convention"},{accessor:"newConvention",title:"Convention nouvelle"},{accessor:"Status",title:"Statut"},{accessor:"created_at",title:"Date"}];a.useEffect(()=>{b(1)},[i]),a.useEffect(()=>{const t=(f-1)*i,r=t+i;L([...c.slice(t,r)])},[f,i,c]),a.useEffect(()=>{x(()=>l.filter(t=>t.id.toString().includes(d.toLowerCase())||t.type_operator.toLowerCase().includes(d.toLowerCase())||t.status.toString().includes(d.toLowerCase())))},[d]),a.useEffect(()=>{const t=_(c,u.columnAccessor);x(u.direction==="desc"?t.reverse():t),b(1)},[u]);const[N,m]=a.useState(!1),[T,z]=a.useState(""),[w,C]=a.useState(!1),[O,Y]=a.useState(""),A=t=>{m(!0),z(t)},H=t=>{S.Inertia.get(route("dashboard.convention.edit",t))},V=t=>{S.Inertia.get(route("dashboard.save-convention.show",t))},[$,ee]=a.useState(1);Math.ceil(l.length/15);const k=($-1)*15,B=k+15;l.slice(k,B);const y=t=>JSON.parse(t);return console.log(l.map((t,r)=>JSON.parse(t.data))),n(Z,{children:[n("div",{className:"panel datatables",children:[e("div",{className:"flex justify-between mb-5",children:e("h3",{className:"text-lg",children:"Liste des conventions en attente de finalisation"})}),n("div",{className:"flex md:items-center md:flex-row flex-col mb-5 gap-5",children:[e(W,{href:route("dashboard.convention.index"),className:"btn btn-warning",children:"Retour"}),n("div",{className:"flex items-center gap-5 ltr:ml-auto rtl:mr-auto",children:[e("div",{className:"flex md:items-center md:flex-row flex-col gap-5",children:e("div",{className:"dropdown",children:e(q,{btnClassName:"!flex items-center border font-semibold border-white-light dark:border-[#253b5c] rounded-md px-4 py-2 text-sm dark:bg-[#1b2e4b] dark:text-white-dark",button:n(X,{children:[e("span",{className:"ltr:mr-1 rtl:ml-1",children:"Colonnes"}),e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M19 9L12 15L5 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),children:e("ul",{className:"!min-w-[140px]",children:R.map((t,r)=>e("li",{className:"flex flex-col",onClick:o=>{o.stopPropagation()},children:e("div",{className:"flex items-center px-4 py-1",children:n("label",{className:"cursor-pointer mb-0",children:[e("input",{type:"checkbox",checked:!s.includes(t.accessor),className:"form-checkbox",defaultValue:t.accessor,onChange:o=>{v(o.target.value),M(t.accessor,o.target.checked)}}),e("span",{className:"ltr:ml-2 rtl:mr-2",children:t.title})]})})},r))})})})}),e("div",{className:"text-right",children:e("input",{type:"text",className:"form-input",placeholder:"Recherche....",value:d,onChange:t=>j(t.target.value)})})]})]}),e(K,{className:"whitespace-nowrap table-hover",records:F,columns:[{accessor:"id",title:"Convention",sortable:!0,hidden:s.includes("id"),render:t=>n("span",{children:["Convention numéro ",t.id]})},{accessor:"familleConvention",title:"Famille convention",sortable:!0,hidden:s.includes("familleConvention"),render:t=>y(t.data).familleConvention.label},{accessor:"newConvention",title:"Convention nouvelle",sortable:!0,hidden:s.includes("newConvention"),render:t=>y(t.data).newConvention.value},{accessor:"status",title:"Statut",sortable:!0,hidden:s.includes("status"),render:t=>e("span",{className:"badge bg-warning",children:"En attente"})},{accessor:"created_at",title:"Date création",sortable:!0,hidden:s.includes("created_at")},{accessor:"",title:"Action",sortable:!0,hidden:s.includes("Action"),render:t=>e("div",{className:"flex space-x-2",children:e("button",{className:"btn btn-info",onClick:()=>A(t.id),children:e(Q,{})})})}],highlightOnHover:!0,totalRecords:c.length,recordsPerPage:i,page:f,onPageChange:t=>b(t),recordsPerPageOptions:g,onRecordsPerPageChange:D,sortStatus:u,onSortStatusChange:E,minHeight:200,paginationText:({from:t,to:r,totalRecords:o})=>`Showing  ${t} to ${r} of ${o} entries`})]}),e("div",{children:e(h,{appear:!0,show:N,as:a.Fragment,children:n(p,{as:"div",open:N,onClose:()=>m(!1),children:[e(h.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{id:"slideIn_down_modal",className:"fixed inset-0 z-[999] overflow-y-auto bg-[black]/60",children:e("div",{className:"flex min-h-screen items-start justify-center px-4",children:n(p.Panel,{className:"panel animate__animated animate__slideInDown my-8 w-full max-w-lg overflow-hidden rounded-lg border-0 p-0 text-black dark:text-white-dark",children:[n("div",{className:"flex items-center justify-between bg-[#fbfbfb] px-5 py-3 dark:bg-[#121c2c]",children:[e("h5",{className:"text-lg font-bold",children:"Modification"}),e("button",{onClick:()=>m(!1),type:"button",className:"text-white-dark hover:text-dark",children:e(I,{})})]}),n("div",{className:"p-5",children:[e("p",{children:"Voulez-vous modifier cet élément ?"}),n("div",{className:"mt-8 flex items-center justify-end",children:[e("button",{onClick:()=>m(!1),type:"button",className:"btn btn-outline-danger",children:"Non"}),e("button",{onClick:()=>H(T),type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",children:"Oui"})]})]})]})})})]})})}),e("div",{children:e(h,{appear:!0,show:w,as:a.Fragment,children:n(p,{as:"div",open:w,onClose:()=>m(!1),children:[e(h.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{id:"slideIn_down_modal",className:"fixed inset-0 z-[999] overflow-y-auto bg-[black]/60",children:e("div",{className:"flex min-h-screen items-start justify-center px-4",children:n(p.Panel,{className:"panel animate__animated animate__slideInDown my-8 w-full max-w-lg overflow-hidden rounded-lg border-0 p-0 text-black dark:text-white-dark",children:[n("div",{className:"flex items-center justify-between bg-[#fbfbfb] px-5 py-3 dark:bg-[#121c2c]",children:[e("h5",{className:"text-lg font-bold",children:"Suppression"}),e("button",{onClick:()=>C(!1),type:"button",className:"text-white-dark hover:text-dark",children:e(I,{})})]}),n("div",{className:"p-5",children:[e("p",{children:"Voulez-vous supprimer cet élément ?"}),n("div",{className:"mt-8 flex items-center justify-end",children:[e("button",{onClick:()=>C(!1),type:"button",className:"btn btn-outline-danger",children:"Non"}),e("button",{onClick:()=>V(O),type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",children:"Oui"})]})]})]})})})]})})})]})}export{fe as default};
