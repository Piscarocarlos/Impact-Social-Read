import{c as C,r as c,u as j,j as e,a}from"./main-7817f3b1.js";import{D as S}from"./DefaultLayout-c44391f7.js";import{F}from"./index.esm-fffe3f01.js";import{S as w}from"./react-select.esm-b3a586dc.js";import"./App-6286d217.js";import"./useSelector-73b17a09.js";import"./useDispatch-d01b19de.js";import"./slicedToArray-faa72b39.js";import"./index-4d501b15.js";import"./index-d410f391.js";import"./floating-ui.dom.browser.min-71618afd.js";function G(){const{convention:l,service:p}=C().props,o=JSON.parse(l.data),[n,v]=c.useState(""),[d,h]=c.useState(""),[m,g]=c.useState(""),{data:s,put:N,setData:i,processing:O,errors:r}=j({service_id:"",convention_id:l.id,cout:"",partner:o.partnerId.label,objectif:"",cout_service:"",type_operator:""}),b=o.service.map(t=>({key:t.key,value:t.value,label:t.label})),x=t=>{s.service_id=t;const y=s.service_id.key,u=p.find(_=>_.id==y);v(u.cout_unitaire),h(u.operator_service)},f=t=>{i("objectif",t.target.value),g(n*t.target.value)};return e(S,{children:a("div",{children:[e("div",{className:"flex items-center justify-between mb-5",children:e("h5",{className:"font-semibold text-lg dark:text-white-light",children:"Service à la convention"})}),e("div",{className:"datatables",children:e("div",{className:" flex justify-between flex-nowrap dark:text-white gap-4",children:e("div",{className:" sm:w-full",children:a("div",{className:"panel",children:[e("h2",{className:"text-lg mb-3 font-bold",children:"Création"}),a("form",{onSubmit:t=>{t.preventDefault(),s.cout=n,s.cout_service=m,s.type_operator=d,N(route("dashboard.service-convention.update",l.id),{})},children:[a("div",{className:"grid grid-cols-2 gap-3",children:[a("div",{className:"my-2 custom-select",children:[a("label",{htmlFor:"service_id",className:"text-base",children:["Choix du service ",e("span",{className:"text-danger",children:"*"})]}),e(w,{onChange:x,defaultValue:s.service_id,options:b,isSearchable:!1}),r.service_id&&e("div",{className:"text-danger",children:r.service_id})]}),a("div",{className:"my-2",children:[a("label",{htmlFor:"convention_id",className:"text-base",children:["Numéro de la convention ",e("span",{className:"text-danger",children:"*"})]}),e("input",{type:"number",value:s.convention_id,onChange:t=>i("convention_id",t.target.value),className:"form-input  ",placeholder:"Numéro de la convention",readOnly:!0}),r.convention_id&&e("div",{className:"text-danger",children:r.convention_id})]})]}),a("div",{className:"grid grid-cols-2 gap-3",children:[a("div",{className:"my-2",children:[a("label",{htmlFor:"cout",className:"text-base",children:["Cout unitaire ",e("span",{className:"text-danger",children:"*"})]}),e("input",{type:"text",value:n,onChange:t=>i("cout",t.target.value),className:"form-input  ",placeholder:"Cout unitaire"}),r.cout&&e("div",{className:"text-danger",children:r.cout})]}),a("div",{className:"my-2",children:[a("label",{htmlFor:"partner",className:"text-base",children:["Partenaire de la convention ",e("span",{className:"text-danger",children:"*"})]}),e("input",{type:"text",value:s.partner,onChange:t=>i("partner",t.target.value),className:"form-input  ",placeholder:"Partenaire de la convention",readOnly:!0}),r.partner&&e("div",{className:"text-danger",children:r.partner})]})]}),a("div",{className:"grid grid-cols-2 gap-3",children:[a("div",{className:"my-2",children:[a("label",{htmlFor:"objectif",className:"text-base",children:["Objectif(Nombre de fois à assurer le service) ",e("span",{className:"text-danger",children:"*"})]}),e("input",{type:"number",value:s.objectif,onChange:f,className:"form-input  ",placeholder:"Objectif"}),r.objectif&&e("div",{className:"text-danger",children:r.objectif})]}),a("div",{className:"my-2",children:[a("label",{htmlFor:"cout_service",className:"text-base",children:["Cout du service ",e("span",{className:"text-danger",children:"*"})]}),e("input",{type:"text",value:m,onChange:t=>i("cout_service",t.target.value),className:"form-input  ",placeholder:"Cout du service",readOnly:!0}),r.cout_service&&e("div",{className:"text-danger",children:r.cout_service})]})]}),e("div",{className:"grid grid-cols-2 gap-3",children:a("div",{className:"my-2",children:[a("label",{htmlFor:"type_operator",className:"text-base",children:["Type d'opérateur de service ",e("span",{className:"text-danger",children:"*"})]}),e("input",{type:"text",value:d,onChange:t=>i("type_operator",t.target.value),className:"form-input  ",placeholder:"Type d'opérateur de service"}),r.type_operator&&e("div",{className:"text-danger",children:r.type_operator})]})}),e("div",{className:"grid  gap-3 pt-4",children:a("button",{type:"submit",className:"btn bg-lime-500 text-white border-lime-500",children:[e(F,{className:"mr-4 rtl:order-2"}),e("span",{children:"Sauvegarder"})]})})]})]})})})})]})})}export{G as default};
