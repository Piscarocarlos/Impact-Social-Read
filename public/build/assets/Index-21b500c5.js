import{r as s,s as $,a as r,j as t,L as Z,F as G,d as S}from"./main-7817f3b1.js";import{D as J,a as U}from"./DefaultLayout-c44391f7.js";import{N as W}from"./index-a42b5db0.js";import{s as _}from"./sortBy-2ed23318.js";import{S as X}from"./sweetalert2.all-b373c7ca.js";import{g as y,f as q,d as K}from"./index.esm-fffe3f01.js";import{u as Q}from"./useDispatch-d01b19de.js";import{t as P,S as L}from"./transition-35f1fbff.js";import"./App-6286d217.js";import"./useSelector-73b17a09.js";import"./slicedToArray-faa72b39.js";import"./index-4d501b15.js";import"./index-d410f391.js";import"./floating-ui.dom.browser.min-71618afd.js";import"./keyboard-bc2fdc5c.js";function pe({pack:u,success:h}){const I=Q();s.useEffect(()=>{I($("Column Chooser Table"))});const[p,f]=s.useState(1),x=[10,20,30,50,100],[l,D]=s.useState(x[0]),[o,v]=s.useState(_(u,"id")),[E,j]=s.useState(o),[n,F]=s.useState(""),[d,A]=s.useState({columnAccessor:"id",direction:"asc"}),[c,b]=s.useState(["created_at"]),R=(e,a)=>{c.includes(e)?b(i=>c.filter(g=>g!==i)):b([...c,e])},M=[{accessor:"id",title:"Id"},{accessor:"name_pack",title:"Pack"},{accessor:"service_pack",title:"Service"},{accessor:"price",title:"Prix"},{accessor:"Status",title:"Statut"},{accessor:"created_at",title:"Date"}];s.useEffect(()=>{f(1)},[l]),s.useEffect(()=>{const e=(p-1)*l,a=e+l;j([...o.slice(e,a)])},[p,l,o]),s.useEffect(()=>{v(()=>u.filter(e=>e.id.toString().includes(n.toLowerCase())||e.name_pack.toLowerCase().includes(n.toLowerCase())||e.service_pack.toLowerCase().includes(n.toLowerCase())||e.status.toString().includes(n.toLowerCase())))},[n]),s.useEffect(()=>{const e=_(o,d.columnAccessor);v(d.direction==="desc"?e.reverse():e),f(1)},[d]);const[k,m]=s.useState(!1),[T,z]=s.useState(""),H=(e="",a="success")=>{X.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:a,title:e,padding:"10px 20px"})};s.useEffect(()=>{h&&H(h)},[h]);const N=e=>{S.Inertia.get(route("dashboard.list-pack.edit",e))},O=e=>{m(!0),z(e)},B=e=>{S.Inertia.get(route("dashboard.list-pack.show",e))},C=[{id:1,label:"btn btn-info",labIcon:K,methode:O}],w=e=>JSON.parse(e).map(g=>g.value);w(u[0].service_pack);function V(e){return e.replace(/\w+/g,function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()}).replace(/\s/g,"")}return r(J,{children:[r("div",{className:"panel datatables",children:[r("div",{className:"flex justify-between mb-5",children:[t("h3",{className:"text-xl font-bold",children:"Liste des packs"}),t(Z,{href:route("dashboard.list-pack.create"),className:"btn btn-success",children:"Créer un  pack"})]}),t("div",{className:"flex md:items-center md:flex-row flex-col mb-5 gap-5",children:r("div",{className:"flex items-center gap-5 ltr:ml-auto rtl:mr-auto",children:[t("div",{className:"flex md:items-center md:flex-row flex-col gap-5",children:t("div",{className:"dropdown",children:t(U,{btnClassName:"!flex items-center border font-semibold border-white-light dark:border-[#253b5c] rounded-md px-4 py-2 text-sm dark:bg-[#1b2e4b] dark:text-white-dark",button:r(G,{children:[t("span",{className:"ltr:mr-1 rtl:ml-1",children:"Colonnes"}),t("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t("path",{d:"M19 9L12 15L5 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),children:t("ul",{className:"!min-w-[140px]",children:M.map((e,a)=>t("li",{className:"flex flex-col",onClick:i=>{i.stopPropagation()},children:t("div",{className:"flex items-center px-4 py-1",children:r("label",{className:"cursor-pointer mb-0",children:[t("input",{type:"checkbox",checked:!c.includes(e.accessor),className:"form-checkbox",defaultValue:e.accessor,onChange:i=>{b(i.target.value),R(e.accessor,i.target.checked)}}),t("span",{className:"ltr:ml-2 rtl:mr-2",children:e.title})]})})},a))})})})}),t("div",{className:"text-right",children:t("input",{type:"text",className:"form-input",placeholder:"Recherche....",value:n,onChange:e=>F(e.target.value)})})]})}),t(W,{className:"whitespace-nowrap table-hover",records:E,columns:[{accessor:"id",title:"Id",sortable:!0,hidden:c.includes("id")},{accessor:"name_pack",title:"Pack",sortable:!0,hidden:c.includes("name_pack"),render:e=>V(e.name_pack)},{accessor:"service_pack",title:"Services",sortable:!0,hidden:c.includes("service_pack"),render:e=>w(e.service_pack).join(" , ")},{accessor:"price",title:"Prix",sortable:!0,hidden:c.includes("price"),render:e=>e.price},{accessor:"status",title:"Statut",sortable:!0,hidden:c.includes("status"),render:e=>e.status==!0?t("span",{className:"badge bg-success",children:"Activé"}):t("span",{className:"badge bg-danger",children:"Désactivé"})},{accessor:"created_at",title:"Date création",sortable:!0,hidden:c.includes("created_at")},{accessor:"",title:"Action",sortable:!0,hidden:c.includes("Action"),render:e=>e.status==!0?r("div",{className:"flex space-x-2",children:[t("button",{className:"btn btn-success",onClick:()=>N(e.id),children:t(y,{})}),C.map(a=>t("button",{className:a.label,onClick:()=>a.methode(e.id),children:t(a.labIcon,{})},a.id))]}):r("div",{className:"flex space-x-2",children:[t("button",{className:"btn btn-danger",onClick:()=>N(e.id),children:t(y,{})}),C.map(a=>t("button",{className:a.label,onClick:()=>a.methode(e.id),children:t(a.labIcon,{})},a.id))]})}],highlightOnHover:!0,totalRecords:o.length,recordsPerPage:l,page:p,onPageChange:e=>f(e),recordsPerPageOptions:x,onRecordsPerPageChange:D,sortStatus:d,onSortStatusChange:A,minHeight:200,paginationText:({from:e,to:a,totalRecords:i})=>`Showing  ${e} to ${a} of ${i} entries`})]}),t("div",{children:t(P,{appear:!0,show:k,as:s.Fragment,children:r(L,{as:"div",open:k,onClose:()=>m(!1),children:[t(P.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t("div",{className:"fixed inset-0"})}),t("div",{id:"slideIn_down_modal",className:"fixed inset-0 z-[999] overflow-y-auto bg-[black]/60",children:t("div",{className:"flex min-h-screen items-start justify-center px-4",children:r(L.Panel,{className:"panel animate__animated animate__slideInDown my-8 w-full max-w-lg overflow-hidden rounded-lg border-0 p-0 text-black dark:text-white-dark",children:[r("div",{className:"flex items-center justify-between bg-[#fbfbfb] px-5 py-3 dark:bg-[#121c2c]",children:[t("h5",{className:"text-lg font-bold",children:"Modification"}),t("button",{onClick:()=>m(!1),type:"button",className:"text-white-dark hover:text-dark",children:t(q,{})})]}),r("div",{className:"p-5",children:[t("p",{children:"Voulez-vous modifier cet élément ?"}),r("div",{className:"mt-8 flex items-center justify-end",children:[t("button",{onClick:()=>m(!1),type:"button",className:"btn btn-outline-danger",children:"Non"}),t("button",{onClick:()=>B(T),type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",children:"Oui"})]})]})]})})})]})})})]})}export{pe as default};
