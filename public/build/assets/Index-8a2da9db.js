import{r as a,s as z,a as s,j as t,L as H,F as M,d as V}from"./main-7817f3b1.js";import{D as $,a as J}from"./DefaultLayout-c44391f7.js";import{N as G}from"./index-a42b5db0.js";import{s as C}from"./sortBy-2ed23318.js";import{a as W,f as X}from"./index.esm-fffe3f01.js";import{u as Z}from"./useDispatch-d01b19de.js";import{t as w,S}from"./transition-35f1fbff.js";import"./App-6286d217.js";import"./useSelector-73b17a09.js";import"./slicedToArray-faa72b39.js";import"./index-4d501b15.js";import"./index-d410f391.js";import"./floating-ui.dom.browser.min-71618afd.js";import"./keyboard-bc2fdc5c.js";function de({convention:i}){const k=Z();a.useEffect(()=>{k(z("Column Chooser Table"))});const[h,p]=a.useState(1),g=[10,20,30,50,100],[l,y]=a.useState(g[0]),[c,x]=a.useState(C(i,"id")),[P,_]=a.useState(c),[d,D]=a.useState(""),[m,E]=a.useState({columnAccessor:"id",direction:"asc"}),[n,f]=a.useState(["created_at"]),F=(e,o)=>{n.includes(e)?f(r=>n.filter(T=>T!==r)):f([...n,e])},I=[{accessor:"id",title:"Convention"},{accessor:"familleConvention",title:"Famille de convention"},{accessor:"accountBank",title:"Compte bancaire"},{accessor:"Status",title:"Statut"},{accessor:"created_at",title:"Date"}];a.useEffect(()=>{p(1)},[l]),a.useEffect(()=>{const e=(h-1)*l,o=e+l;_([...c.slice(e,o)])},[h,l,c]),a.useEffect(()=>{x(()=>i.filter(e=>e.id.toString().includes(d.toLowerCase())||e.status.toString().includes(d.toLowerCase())))},[d]),a.useEffect(()=>{const e=C(c,m.columnAccessor);x(m.direction==="desc"?e.reverse():e),p(1)},[m]);const[v,u]=a.useState(!1),[L,j]=a.useState(""),R=e=>{u(!0),j(e)},B=e=>{V.Inertia.get(route("dashboard.convention.show",e))},[A,q]=a.useState(1);Math.ceil(i.length/15);const N=(A-1)*15,O=N+15;i.slice(N,O);const b=e=>JSON.parse(e);return console.log(i.map(e=>JSON.parse(e.data))),s($,{children:[s("div",{className:"panel datatables",children:[t("div",{className:"flex justify-between mb-5",children:t("h3",{className:"text-lg",children:"Liste des conventions finalisées"})}),s("div",{className:"flex md:items-center md:flex-row flex-col mb-5 gap-5",children:[t(H,{href:route("dashboard.convention.index"),className:"btn btn-warning",children:"Retour"}),s("div",{className:"flex items-center gap-5 ltr:ml-auto rtl:mr-auto",children:[t("div",{className:"flex md:items-center md:flex-row flex-col gap-5",children:t("div",{className:"dropdown",children:t(J,{btnClassName:"!flex items-center border font-semibold border-white-light dark:border-[#253b5c] rounded-md px-4 py-2 text-sm dark:bg-[#1b2e4b] dark:text-white-dark",button:s(M,{children:[t("span",{className:"ltr:mr-1 rtl:ml-1",children:"Colonnes"}),t("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t("path",{d:"M19 9L12 15L5 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),children:t("ul",{className:"!min-w-[140px]",children:I.map((e,o)=>t("li",{className:"flex flex-col",onClick:r=>{r.stopPropagation()},children:t("div",{className:"flex items-center px-4 py-1",children:s("label",{className:"cursor-pointer mb-0",children:[t("input",{type:"checkbox",checked:!n.includes(e.accessor),className:"form-checkbox",defaultValue:e.accessor,onChange:r=>{f(r.target.value),F(e.accessor,r.target.checked)}}),t("span",{className:"ltr:ml-2 rtl:mr-2",children:e.title})]})})},o))})})})}),t("div",{className:"text-right",children:t("input",{type:"text",className:"form-input",placeholder:"Recherche....",value:d,onChange:e=>D(e.target.value)})})]})]}),t(G,{className:"whitespace-nowrap table-hover",records:P,columns:[{accessor:"id",title:"Convention",sortable:!0,hidden:n.includes("id"),render:e=>s("span",{children:["Convention numéro ",e.id]})},{accessor:"familleConvention",title:"Famille convention",sortable:!0,hidden:n.includes("familleConvention"),render:e=>b(e.data).familleConvention.label},{accessor:"accountBank",title:"Compte bancaire",sortable:!0,hidden:n.includes("accountBank"),render:e=>b(e.data).accountBank.value},{accessor:"status",title:"Statut",sortable:!0,hidden:n.includes("status"),render:e=>t("span",{className:"badge bg-success",children:b(e.data).statutConvention.value})},{accessor:"created_at",title:"Date création",sortable:!0,hidden:n.includes("created_at")},{accessor:"",title:"Action",sortable:!0,hidden:n.includes("Action"),render:e=>t("div",{className:"flex space-x-2",children:t("button",{className:"btn btn-primary",onClick:()=>R(e.id),children:t(W,{})})})}],highlightOnHover:!0,totalRecords:c.length,recordsPerPage:l,page:h,onPageChange:e=>p(e),recordsPerPageOptions:g,onRecordsPerPageChange:y,sortStatus:m,onSortStatusChange:E,minHeight:200,paginationText:({from:e,to:o,totalRecords:r})=>`Showing  ${e} to ${o} of ${r} entries`})]}),t("div",{children:t(w,{appear:!0,show:v,as:a.Fragment,children:s(S,{as:"div",open:v,onClose:()=>u(!1),children:[t(w.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t("div",{className:"fixed inset-0"})}),t("div",{id:"slideIn_down_modal",className:"fixed inset-0 z-[999] overflow-y-auto bg-[black]/60",children:t("div",{className:"flex min-h-screen items-start justify-center px-4",children:s(S.Panel,{className:"panel animate__animated animate__slideInDown my-8 w-full max-w-lg overflow-hidden rounded-lg border-0 p-0 text-black dark:text-white-dark",children:[s("div",{className:"flex items-center justify-between bg-[#fbfbfb] px-5 py-3 dark:bg-[#121c2c]",children:[t("h5",{className:"text-lg font-bold",children:"Visualisation"}),t("button",{onClick:()=>u(!1),type:"button",className:"text-white-dark hover:text-dark",children:t(X,{})})]}),s("div",{className:"p-5",children:[t("p",{children:"Voulez-vous ouvrir cet élément ?"}),s("div",{className:"mt-8 flex items-center justify-end",children:[t("button",{onClick:()=>u(!1),type:"button",className:"btn btn-outline-danger",children:"Non"}),t("button",{onClick:()=>B(L),type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",children:"Oui"})]})]})]})})})]})})})]})}export{de as default};
