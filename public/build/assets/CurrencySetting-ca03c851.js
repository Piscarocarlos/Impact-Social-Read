import{u as se,r as l,a as n,j as e,F as ie}from"./main-7817f3b1.js";import{D as de}from"./DefaultLayout-c44391f7.js";import"./index-a42b5db0.js";import{G as D}from"./index.esm-fffe3f01.js";import"./App-6286d217.js";import"./useSelector-73b17a09.js";import"./useDispatch-d01b19de.js";import"./slicedToArray-faa72b39.js";import"./index-4d501b15.js";import"./index-d410f391.js";import"./floating-ui.dom.browser.min-71618afd.js";function ue(s){return D({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(s)}function me(s){return D({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(s)}function he(s){return D({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"}}]})(s)}const ke=({currency:s,defaultCurrency:d})=>{var R,P,H,j;console.log("this is a test",d);const $=se({defaultCurrency:"",format:"",separator:"",decimalPlaces:2,newCurrencyName:"",newCurrencyCode:"",newCurrencySymbol:"",newCurrencyExchangeRate:"",currencies:s,showNewCurrencyModal:!1}),{data:a,setData:o,errors:be,post:m}=$,[u,F]=l.useState(null),[z,h]=l.useState(""),[M,b]=l.useState(""),[V,p]=l.useState(""),[A,y]=l.useState(""),i=(r,t)=>{o(r,t)},I=r=>{i("defaultCurrency",r.target.value)},L=r=>{i("format",r.target.value)},_=r=>{i("separator",r.target.value)},B=r=>{i("decimalPlaces",Number(r.target.value))},T=r=>{i("newCurrencyName",r.target.value)},G=r=>{i("newCurrencyCode",r.target.value)},q=r=>{i("newCurrencySymbol",r.target.value)},J=r=>{i("newCurrencyExchangeRate",r.target.value)},C=r=>{},g=r=>{},[f,K]=l.useState(""),[v,O]=l.useState(""),[N,Q]=l.useState(""),[x,U]=l.useState(""),[w,W]=l.useState(""),[S,X]=l.useState(""),[E,Y]=l.useState(""),[k,Z]=l.useState(""),ee=async r=>{if(r.preventDefault(),a.newCurrencyName===""){W("Veuillez entrer le nom de la devise");return}if(a.newCurrencyCode===""){X("Veuillez entrer le code de la devise");return}if(a.newCurrencySymbol===""){Y("Veuillez entrer le symbole de la devise");return}if(a.newCurrencyExchangeRate===""){Z("Veuillez entrer le taux de change");return}const t={name:a.newCurrencyName,code:a.newCurrencyCode,symbol:a.newCurrencySymbol,exchange_rate:a.newCurrencyExchangeRate};console.log("New Currency Data:",t),console.log("data or something:",a),o("currencies",[...a.currencies,t]),o("newCurrencyName",""),o("newCurrencyCode",""),o("newCurrencySymbol",""),o("newCurrencyExchangeRate",""),o("showNewCurrencyModal",!1),m(route("dashboard.save.currency"),{data:a,onError:g,onSuccess:C}),location.reload()},re=()=>{if(a.defaultCurrency===""){K("Sélectionner une autre devise par défaut");return}m(route("dashboard.save.default.currency"),{data:a,onError:g,onSuccess:C}),location.reload()},ae=()=>{if(a.format===""){O("Sélectionner un nouveau format");return}if(a.separator===""){Q("Sélectionner un nouveau séparateur");return}if(a.decimalPlaces===""){U("Veuillez entrer le nombre de décimales");return}m(route("dashboard.save.format.settings"),{data:a,onError:g,onSuccess:C}),location.reload()},ne=r=>{console.log(d[0].defaultCurrency),console.log(r),console.log(s.id),m(route("dashboard.delete.currency",r)),location.reload()},te=r=>{const{name:t,code:c,symbol:ce,exchange_rate:oe}=a.currencies[r];F(r),h(t),b(c),p(ce),y(oe)},le=r=>{const c={id:a.currencies[u].id,name:z,code:M,symbol:V,exchange_rate:A};r.preventDefault(),m(route("dashboard.save.modified.currency",c)),F(null),h(""),b(""),p(""),y(""),location.reload()};return n(de,{children:[n("div",{className:"grid grid-cols-2 gap-4",children:[n("div",{className:"panel",children:[e("p",{className:"text-xl pb-3 flex items-center border-b-2 pb-2 mb-4",children:"Devise par défaut"}),n("div",{className:"flex space-x-4",children:[n("div",{className:"w-1/2",children:[e("label",{htmlFor:"defaultCurrency",className:"block",children:"Sélectionnez la devise par défaut:"}),n("select",{id:"defaultCurrency",value:a.defaultCurrency,onChange:I,className:"form-select mt-1 block w-full",children:[n("option",{value:"",children:["Devise Actuelle: ",(R=d[0])==null?void 0:R.defaultCurrency]}),a.currencies.map((r,t)=>n("option",{value:r.code,children:[r.name," (",r.symbol,")"]},t))]}),f&&e("p",{className:`text-red-500 text-sm ${f?"inertia-error":""}`,children:f})]}),e("div",{className:"mt-7",children:e("button",{onClick:re,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"Enregistrer"})})]})]}),n("div",{className:"panel",children:[e("p",{className:"text-xl pb-3 flex items-center border-b-2 pb-2 mb-4",children:"Définition du format"}),n("div",{className:"flex space-x-4",children:[n("div",{className:"w-1/3",children:[e("label",{htmlFor:"format",className:"block",children:"Format:"}),n("select",{id:"format",value:a.format,onChange:L,className:"form-select mt-1 block w-full",children:[e("option",{value:"",children:(P=d[0])==null?void 0:P.format}),e("option",{value:"[Symbole] [Nombre]",children:"Symbole en premier avec espace"}),e("option",{value:"[Symbole][Nombre]",children:"Symbole en premier sans espace"}),e("option",{value:"[Nombre] [Symbole]",children:"Nombre en premier avec espace"}),e("option",{value:"[Nombre][Symbole]",children:"Nombre en premier sans espace"})]}),v&&e("p",{className:`text-red-500 text-sm ${v?"inertia-error":""}`,children:v})]}),n("div",{className:"w-1/3",children:[e("label",{htmlFor:"separator",className:"block",children:"Séparateur:"}),n("select",{id:"separator",value:a.separator,onChange:_,className:"form-select mt-1 block w-full",children:[n("option",{value:"",children:["1",(H=d[0])==null?void 0:H.separator,"000",(j=d[0])==null?void 0:j.separator,"000"]}),e("option",{value:",",children:"Virgule (,)"}),e("option",{value:".",children:"Point décimal (.)"})]}),N&&e("p",{className:`text-red-500 text-sm ${N?"inertia-error":""}`,children:N})]}),n("div",{className:"w-1/3",children:[e("label",{htmlFor:"decimalPlaces",className:"block",children:"Décimales:"}),e("input",{id:"decimalPlaces",type:"number",value:a.decimalPlaces,onChange:B,className:"form-input mt-1 block w-full"}),x&&e("p",{className:`text-red-500 text-sm ${x?"inertia-error":""}`,children:x})]})]}),e("div",{className:"mt-4",children:e("button",{onClick:ae,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"Enregistrer"})})]})]}),n("div",{children:[e("div",{className:"mt-4",children:e("button",{onClick:()=>o("showNewCurrencyModal",!a.showNewCurrencyModal),className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",style:{lineHeight:"1.5"},children:"Ajouter une devise"})}),a.showNewCurrencyModal&&e("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:n("div",{className:"w-1/3 bg-white p-8 rounded-lg animate-fade-in dark:bg-dark",children:[e("p",{className:"text-xl pb-3 flex items-center border-b-2 pb-2 mb-4",children:"Ajouter une devise"}),n("form",{onSubmit:ee,children:[n("div",{className:"space-y-4",children:[e("label",{htmlFor:"newCurrencyName",className:"block",children:"Nom de la devise:"}),e("input",{id:"newCurrencyName",type:"text",value:a.newCurrencyName,onChange:T,className:"form-input w-full"}),w&&e("p",{className:`text-red-500 text-sm ${w?"inertia-error":""}`,children:w}),e("label",{htmlFor:"newCurrencyCode",className:"block",children:"Code de la devise:"}),e("input",{id:"newCurrencyCode",type:"text",value:a.newCurrencyCode,onChange:G,className:"form-input w-full"}),S&&e("p",{className:`text-red-500 text-sm ${S?"inertia-error":""}`,children:S}),e("label",{htmlFor:"newCurrencySymbol",className:"block",children:"Symbole de la devise:"}),e("input",{id:"newCurrencySymbol",type:"text",value:a.newCurrencySymbol,onChange:q,className:"form-input w-full"}),E&&e("p",{className:`text-red-500 text-sm ${E?"inertia-error":""}`,children:E}),e("label",{htmlFor:"newCurrencyExchangeRate",className:"block",children:"Taux de change:"}),e("input",{id:"newCurrencyExchangeRate",type:"text",value:a.newCurrencyExchangeRate,onChange:J,className:"form-input w-full"}),k&&e("p",{className:`text-red-500 text-sm ${k?"inertia-error":""}`,children:k})]}),n("div",{className:"mt-4 flex justify-end",children:[e("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"Ajouter"}),e("button",{onClick:()=>o("showNewCurrencyModal",!1),className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded ml-4",children:"Annuler"})]})]})]})})]}),e("br",{}),n("div",{className:"panel",children:[e("p",{className:"text-xl pb-3 flex items-center border-b-2 pb-2 mb-4",children:"Liste des devises"}),e("form",{onSubmit:r=>{r.preventDefault()},children:n("table",{className:"w-full",children:[e("thead",{children:n("tr",{children:[e("th",{children:"Nom"}),e("th",{children:"Code"}),e("th",{children:"Symbole"}),e("th",{children:"Taux de change (MAD)"}),e("th",{children:"Actions"})]})}),e("tbody",{children:a.currencies.map((r,t)=>n("tr",{children:[e("td",{children:u===t?e("input",{type:"text",value:z,onChange:c=>h(c.target.value),className:"border rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"}):r.name}),e("td",{children:u===t?e("input",{type:"text",value:M,onChange:c=>b(c.target.value),className:"border rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"}):r.code}),e("td",{children:u===t?e("input",{type:"text",value:V,onChange:c=>p(c.target.value),className:"border rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"}):r.symbol}),e("td",{children:u===t?e("input",{type:"text",value:A,onChange:c=>y(c.target.value),className:"border rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"}):r.exchange_rate}),e("td",{children:u===t?n("button",{onClick:le,className:"text-green-500 hover:text-green-600",children:[e(me,{})," "]}):n(ie,{children:[n("button",{onClick:()=>te(t),className:"text-blue-500 hover:text-blue-600",children:[e(ue,{})," "]}),n("button",{onClick:()=>ne(r.id),className:"text-red-500 hover:text-red-600 ml-2",children:[e(he,{})," "]})]})})]},t))})]})})]})]})};export{ke as default};
