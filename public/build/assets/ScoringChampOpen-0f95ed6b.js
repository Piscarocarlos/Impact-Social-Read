import{r as s,u as f,a,j as e,L as v}from"./main-7817f3b1.js";import{M as L}from"./index.esm-d48e620a.js";import{b as w}from"./index.esm-fffe3f01.js";import{S as D}from"./react-select.esm-b3a586dc.js";import{t as k,S as N}from"./transition-35f1fbff.js";import"./slicedToArray-faa72b39.js";import"./floating-ui.dom.browser.min-71618afd.js";import"./keyboard-bc2fdc5c.js";const q=({id:y,fieldOpen:r,titleField:C})=>{const[u,d]=s.useState(!1),[p,h]=s.useState(),[M,b]=s.useState(r),S=[{value:"Methode par tranche",label:"Methode par tranche"},{value:"Methode par Coefficient",label:"Methode par Coefficient"}],i=t=>JSON.parse(t),[c,x]=s.useState(0);s.useEffect(()=>{b(r),r.length!==0&&(r[0].type==="coefficient"?h("Methode par Coefficient"):h("Methode par tranche"));const t=l=>{const z=l.length;return l[z-1]};r.length!==0?x(i(t(r).data).max):x(0)},[r]),console.log(c);let m;c?m=c:m="";const{data:g,setData:o,processing:_,errors:n,reset:A,put:T,post:j}=f({min:m,max:"",val:"",type:"tranche"});f({type:"coefficient",alpha:"",beta:""}),s.useEffect(()=>{if(c!==0){const t={...g,min:c};o(t)}},[g.max]);const F=t=>{t.preventDefault(),j(route("dashboard.scoring.save.tranch.method",y),{onSuccess:()=>{b(r),d(!1)},onError:l=>{}})};return console.log("rrrrrr",r),console.log("rruuuuur",M),a("div",{children:[e("h2",{className:"text-2xl text-center",children:C}),e("div",{className:"flex flex-wrap -mx-3 mb-6",children:r.length===0?a("div",{className:"w-full px-3",children:[e("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2  dark:bg-black dark:text-white",htmlFor:"grid-password",children:"Choisissez Une methode"}),e(D,{className:"dark:bg-dark ",onChange:t=>h(t.value),options:S,isSearchable:!0})]}):null}),p==="Methode par Coefficient"?e("div",{className:"coefficient",children:r.length?e("div",{className:"table-responsive mb-5",children:a("table",{children:[e("thead",{children:a("tr",{children:[e("th",{children:" N°"}),e("th",{children:"Alpha"}),e("th",{children:"Beta"}),e("th",{className:"!text-center",children:"Action"})]})}),e("tbody",{children:r==null?void 0:r.map((t,l)=>a("tr",{children:[e("td",{children:"Variable"}),a("td",{children:[i(t.data).alpha," "]}),a("td",{children:[" ",i(t.data).beta]}),e("td",{className:"flex justify-around",children:e(v,{href:route("dashboard.delete.tranch.method",t.id),method:"delete",className:"text-white p-2 rounded hover:text-gray-100 mr-2 bg-red-600",children:e(w,{})})})]},l))})]})}):e("div",{className:"",children:e("h4",{className:"text-center",children:"Methode Indisponible "})})}):p==="Methode par tranche"?a("div",{className:"tranche",children:[e("div",{className:"flex w-full justify-end my-4",children:a("button",{onClick:()=>d(!0),type:"button",className:"btn btn-success w-1/3 gap-2 ",children:[e(L,{}),"Ajouter une tranche"]})}),a("div",{className:"panel rounded-md p-4 ",children:[e("div",{className:"flex flex-wrap",children:e("div",{className:"w-full lg:w-full my-2 pr-0 lg:pr-2",children:a("p",{className:"text-base font-bold pb-6 flex items-center",children:[e("i",{className:"fas fa-list mr-3"})," Liste des Champs pour le scoring"]})})}),e("div",{className:"table-responsive mb-5",children:a("table",{children:[e("thead",{children:a("tr",{children:[e("th",{children:"Tranche N°"}),e("th",{children:"Valeur"}),e("th",{children:"minimum"}),e("th",{children:"maximum"}),e("th",{className:"!text-center",children:"Action"})]})}),e("tbody",{children:r==null?void 0:r.map((t,l)=>a("tr",{children:[a("td",{children:["Tranche ",l+1]}),a("td",{children:[i(t.data).val," "]}),a("td",{children:[i(t.data).min," "]}),a("td",{children:[" ",i(t.data).max]}),e("td",{className:"flex justify-around",children:r.length===l+1?e(v,{href:route("dashboard.delete.tranch.method",t.id),method:"delete",className:"text-white p-2 rounded hover:text-gray-100 mr-2 bg-red-600",children:e(w,{})}):e("span",{children:"-"})})]},l))})]})})]})]}):null,e(k,{appear:!0,show:u,as:s.Fragment,children:a(N,{as:"div",open:u,onClose:()=>d(!1),children:[e(k.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{id:"zoomIn_up_modal",className:"fixed inset-0 z-[999] overflow-y-auto bg-[black]/60",children:e("div",{className:"flex min-h-screen items-start justify-center px-4",children:a(N.Panel,{className:"panel animate__animated animate__zoomInUp my-8 w-full max-w-lg overflow-hidden rounded-lg border-0 p-0 text-black dark:text-white-dark",children:[a("div",{className:"flex items-center justify-between bg-[#fbfbfb] px-5 py-3 dark:bg-[#121c2c]",children:[e("h5",{className:"text-lg font-bold",children:"Methode par tranche"}),e("button",{onClick:()=>d(!1),type:"button",className:"text-white-dark hover:text-dark",children:a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e("div",{className:"p-5",children:e("form",{onSubmit:F,children:a("div",{className:"flex flex-wrap -mx-3 mb-6",children:[a("div",{className:n.val?"has-error  w-full px-3":" w-full px-3",children:[e("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2  dark:bg-black dark:text-white",htmlFor:"grid-password",children:"Donnez la valeur de la tranche"}),e("input",{min:0,onChange:t=>o("val",t.target.value),className:"appearance-none form-input form-input block w-full  dark:bg-black dark:text-white  text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",id:"",type:"number",placeholder:"Valeur de la tranche"}),n.val&&e("div",{className:"text-red-500 text-xs",children:n.val})]}),c!==0?a("div",{className:"w-1/2 px-3 ",children:[e("label",{className:"block tracking-wide text-gray-500 text-xs font-bold mb-2  dark:bg-black dark:text-white",htmlFor:"grid-password",children:"L'ancien max devient le nouveau min!"}),e("input",{value:c,readOnly:!0,className:" appearance-none form-input form-input block w-full  dark:bg-black dark:text-white  text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",type:"text",placeholder:"min..."})]}):a("div",{className:n.min?"has-error  w-1/2 px-3":"w-1/2 px-3 ",children:[e("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2  dark:bg-black dark:text-white",htmlFor:"grid-password",children:"donnez une valeur minimum"}),e("input",{min:0,onChange:t=>o("min",t.target.value),className:"appearance-none form-input form-input block w-full  dark:bg-black dark:text-white  text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",type:"number",placeholder:"min..."}),n.min&&e("div",{className:"text-red-500 text-xs",children:n.min})]}),a("div",{className:n.min?"has-error  w-1/2 px-3":"w-1/2 px-3 ",children:[e("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2  dark:bg-black dark:text-white",htmlFor:"grid-password",children:"donnez une valeur maximum"}),e("input",{min:0,onChange:t=>o("max",t.target.value),className:"appearance-none form-input form-input block w-full  dark:bg-black dark:text-white  text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",type:"number",placeholder:"max...."}),n.max&&e("div",{className:"text-red-500 text-xs",children:n.max})]}),e("div",{className:"w-full px-3",children:e("button",{type:"submit",className:"bg-green-500 w-full mt-5 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"valider"})})]})})})]})})})]})})]})};export{q as default};
